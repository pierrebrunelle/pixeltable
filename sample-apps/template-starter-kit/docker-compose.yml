version: '3.8'

services:
  api:
    build: ./backend
    ports:
      - "8000:8000"
    volumes:
      # Persist Pixeltable data
      # If using EBS, mount the EBS volume to the host path mapped here
      - pixeltable_data:/root/.pixeltable
    environment:
      - PIXELTABLE_API_KEY=${PIXELTABLE_API_KEY}
      # Optional: Customize PIXELTABLE_HOME if needed
      # - PIXELTABLE_HOME=/root/.pixeltable
    restart: unless-stopped

volumes:
  pixeltable_data:

